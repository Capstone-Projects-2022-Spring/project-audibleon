option_settings:
    aws:elasticbeanstalk:container:python:
        WSGIPath: "application:app"

packages:
    yum:
        ffmpeg : []
        mesa-libGL-devel : []

commands:
    00_cd_root:
        command: 'cd ~'
    01_download_conda:
        command: 'wget https://repo.anaconda.com/archive/Anaconda3-2021.11-Linux-x86_64.sh'
    02_install_conda:
        command: 'bash Anaconda3-2021.11-Linux-x86_64.sh -b -f -p /anaconda'
    03_add_conda_path:
        command: 'export PATH=~/anaconda3/bin:$PATH'
    04_activate_conda_installation:
        command: 'source ~/.bashrc'

    05_conda_create:
        command: 'conda create -n tensorflow pip python=3.9'
    06_conda_activate:
        command: 'conda activate tensorflow'

    07_install_tensorflow:
        command: 'pip install --ignore-installed --upgrade tensorflow==2.5.0 --no-cache-dir'
    08_clone_tensorflow:
        command: 'git clone https://github.com/tensorflow/models'

    09_download_protobuf:
        command: 'wget https://github.com/protocolbuffers/protobuf/releases/download/v3.20.0/protoc-3.20.0-linux-x86_64.zip'
    10_unzip_protobuf:
        command: 'sudo unzip protoc-3.20.0-linux-x86_64.zip -d /usr/local'

    11_cd_tensorflow:
        command: 'cd models/research'
    12_protobuf_compilation:
        command: 'protoc object_detection/protos/*.proto --python_out=.'

    13_install_cython:
        command: 'pip install cython'
    14_install_cocoapi:
        command: 'pip install git+https://github.com/philferriere/cocoapi.git#subdirectory=PythonAPI'
    
    15_object_detection_api_setup:
        command: 'cp object_detection/packages/tf2/setup.py .'
    16_install_object_detection_api:
        command: 'python -m pip install --use-feature=2020-resolver . --no-cache-dir'

    17_install_flask:
        command: 'pip install Flask'
    18_install_flaskwtf:
        command: 'pip install Flask-WTF'
    19_install_flasksqlalchemy:
        command: 'pip install Flask-SQLAlchemy'
    20_install_flasklogin:
        command: 'pip install Flask-Login'
    21_install_flasksocketio:
        command: 'pip install Flask-ScoketIO'
    22_install_eventlet:
        command: 'pip install eventlet'
    23_install_mediapipe:
        command: 'pip install mediapipe'
    24_install_watchdog:
        command: 'pip install watchdog'
    25_install_readchar:
        command: 'pip install readchar'
    26_install_cryptography:
        command: 'pip install cryptography'
    27_install_emailvalidator:
        command: 'pip install email-validator'
    28_install_pythondotenv:
        command: 'pip install python-dotenv'
    29_install_pymysql:
        command: 'pip install pymysql'
    30_install_nltk:
        command: 'pip install nltk'

    31_open_python_shell:
        command: 'python'
    32_import_nltk:
        command: 'import nltk'
    33_install_nltk_punkt:
        command: "nltk.download('punkt')"
    34_close_python_shell:
        command: 'exit()'

    35_install_gunicorn:
        command: 'pip install gunicorn'




